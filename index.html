<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Monday's Child</title>
  <meta name="description" content="나는 어느 요일에 태어난 아이일까요?" />
  <style>
    :root { --bg:#0b1020; --card:#121935; --muted:#9fb0ff; --text:#e9edff; --accent:#6ea8ff; --accent2:#8be0d4; --error:#ff6b6b; --highlight:#ffd166 }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic",Arial,sans-serif;color:var(--text);
      background: radial-gradient(1200px 800px at 10% 0%, #15204a 0%, var(--bg) 60%),
                  radial-gradient(900px 600px at 90% 10%, #0d1a3d 0%, var(--bg) 70%);
    }
    .wrap{max-width:760px;margin:0 auto;padding:32px 20px 72px}
    header{text-align:center;margin-bottom:24px}
    h1{font-size:clamp(22px,3.2vw,32px);margin:0 0 6px}
    .lead{color:var(--muted);font-size:14px;margin:0}

    .card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(6px);border-radius:16px;padding:18px;box-shadow:0 12px 32px rgba(0,0,0,.25)}
    .grid{display:grid;gap:14px}
    label{font-size:13px;color:var(--muted)}
    input[type=text], select{width:100%;background:var(--card);border:1px solid rgba(255,255,255,.12);color:var(--text);border-radius:12px;padding:12px 14px;font-size:16px;outline:none}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px;align-items:end}
    .date-grid{display:grid;grid-template-columns:2.2fr 1.3fr 1.3fr;gap:8px}
    .btns{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    button{border:0;cursor:pointer;border-radius:12px;padding:12px 16px;font-weight:600;font-size:14px;letter-spacing:.2px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#0b1020;box-shadow:0 6px 18px rgba(110,168,255,.35)}
    button.secondary{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,.16);box-shadow:none}
    button.small{padding:8px 10px;font-size:12px;border-radius:10px}

    .result{margin-top:14px;padding:16px;border-radius:14px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);text-align:center}
    .msg{margin-top:8px;font-size:18px;line-height:1.6;font-weight:700;color:var(--highlight)}
    .img-wrap{margin-top:12px;height:360px;border-radius:12px;border:1px solid rgba(255,255,255,.12);overflow:hidden;background:rgba(0,0,0,.15);position:relative}
    .res-img{width:100%;height:100%;object-fit:contain;display:block}
    .res-img.cover{object-fit:cover}
    /* 캡션은 이미지 아래(겹치지 않도록) */
    .img-caption{margin-top:8px;font-size:11px;color:rgba(255,255,255,0.45);text-align:right}

    .err{color:var(--error)}

    details{margin-top:18px}
    summary{cursor:pointer;color:var(--muted)}
    blockquote{margin:8px 0 0;color:var(--muted);border-left:3px solid rgba(255,255,255,.15);padding-left:10px;line-height:1.6}

    footer{margin-top:28px;text-align:center;color:var(--muted);font-size:12px}

    /* 드롭다운 화살표 여백 보정(너무 끝으로 붙지 않게) */
    select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:
      linear-gradient(45deg, transparent 50%, var(--muted) 50%),
      linear-gradient(135deg, var(--muted) 50%, transparent 50%),
      linear-gradient(to right, transparent, transparent);
      background-position: calc(100% - 20px) calc(50% - 3px), calc(100% - 14px) calc(50% - 3px), 100% 0;
      background-size: 6px 6px, 6px 6px, 2.5em 100%;
      background-repeat: no-repeat;
      padding-right: 40px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Monday's Child</h1>
      <p class="lead">나는 어느 요일에 태어난 아이일까요?</p>
    </header>

    <section class="card">
      <div class="grid">
        <div class="row">
          <div>
            <label for="yyyy">생년월일</label>
            <div class="date-grid">
              <input id="yyyy" type="text" inputmode="numeric" placeholder="YYYY" maxlength="4" aria-label="년(4자리)" />
              <input id="mm" type="text" inputmode="numeric" placeholder="MM" maxlength="2" aria-label="월(2자리)" />
              <input id="dd" type="text" inputmode="numeric" placeholder="DD" maxlength="2" aria-label="일(2자리)" />
            </div>
          </div>
          <div>
            <label for="gender">성별</label>
            <select id="gender">
              <option value="F">여자</option>
              <option value="M">남자</option>
            </select>
          </div>
        </div>
        <div class="btns">
          <button id="checkBtn" aria-describedby="res">조회하기</button>
          <button class="secondary" id="resetBtn">초기화</button>
        </div>

        <div id="res" class="result" aria-live="polite">
          <div class="msg">생년월일과 성별을 입력하고 <b>조회하기</b>를 눌러주세요.</div>
        </div>

        <details>
          <summary>Mother Goose: Monday’s Child 원문 보기</summary>
          <blockquote>
            Monday’s child is fair of face,<br />
            Tuesday’s child is full of grace,<br />
            Wednesday’s child is full of woe,<br />
            Thursday’s child has far to go,<br />
            Friday’s child is loving and giving,<br />
            Saturday’s child works hard for a living,<br />
            But the child that is born on the Sabbath day<br />
            Is bonny and blithe, and good and gay.
          </blockquote>
        </details>
      </div>
    </section>

    <footer>
      <p>© 2025 Monday’s Child — 요일 계산은 로컬(브라우저) 시간대로 수행됩니다.</p>
    </footer>
  </div>

  <script>
    const DAY_NAMES=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"];
    const TRAITS={0:"예쁘고 즐겁고 착하고 밝은",1:"얼굴이 고운",2:"은총이 가득한",3:"슬픔이 많은",4:"먼 길을 갈",5:"사랑 많고 나눔을 잘하는",6:"부지런히 일하는"};

    // GitHub images 폴더의 파일명만 보관
    // F: 여자, M: 남자
    const DAY_IMAGE_FILES = {
      F: {
        0:["Sunday_f1.png","Sunday_f2.png"],
        1:["Monday_f1.png","Monday_f2.png","Monday_f3.png"],
        2:["Tuesday_f1.png","Tuesday_f3.png","Tuesday_f4.png"],
        3:["Wednesday_f1.png","Wednesday_f2.png"],
        4:["Thursday_f1.png","Thursday_f2.png","Thursday_f3.png"],
        5:["Friday_f1.png","Friday_f2.png","Friday_f3.png"],
        6:["Saturday_f1.png","Saturday_f2.png"]
      },
      M: {
        0:["Sunday_m1.png","Sunday_m2.png"],
        1:["Monday_m1.png","Monday_m2.png"],
        2:["Tuesday_m1.png","Tuesday_m2.png"],
        3:["Wednesday_m1.png","Wednesday_m2.png","Wednesday_m3.png"],
        4:["Thursday_m1.png","Thursday_m2.png"],
        5:["Friday_m1.png","Friday_m2.png"],
        6:["Saturday_m1.png","Saturday_m2.png"]
      }
    };

    const $=id=>document.getElementById(id);
    const yEl=$("yyyy"), mEl=$("mm"), dEl=$("dd");

    [yEl,mEl,dEl].forEach((el,idx,arr)=>{
      el.addEventListener('input', ()=>{
        el.value=el.value.replace(/\D/g,'');
        if(el.maxLength && el.value.length>=el.maxLength){ const next=arr[idx+1]; if(next) next.focus(); }
      });
      el.addEventListener('keydown',(e)=>{
        if(e.key==='Backspace'&&el.selectionStart===0){const prev=arr[idx-1];if(prev){prev.focus();prev.selectionStart=prev.selectionEnd=prev.value.length;}}
      });
    });

    // 월/일 1자리 입력 보정
    [mEl,dEl].forEach(el=>{
      el.addEventListener('blur',()=>{
        if(el.value.length===1){ el.value='0'+el.value; }
      });
    });

    function parseDateFromFields(){
      const y=yEl.value, m=mEl.value, d=dEl.value;
      if(y.length!==4||m.length!==2||d.length!==2) return null;
      const yi=+y, mi=+m, di=+d;
      if(yi<1000||mi<1||mi>12||di<1||di>31) return null;
      const dt=new Date(yi, mi-1, di, 12);
      if(dt.getFullYear()!==yi||dt.getMonth()!==mi-1||dt.getDate()!==di) return null;
      return dt;
    }

    function makeMessage(idx){const day=DAY_NAMES[idx];const trait=TRAITS[idx];return{sentence:`${day}에 태어난 당신은 ${trait} 사람이에요.`};}
    function pickRandom(arr){return arr[Math.floor(Math.random()*arr.length)];}

    function imageFor(dayIndex, gender){
      const list=(DAY_IMAGE_FILES[gender]&&DAY_IMAGE_FILES[gender][dayIndex])||[];
      if(list.length===0) return null;
      // 리포지토리 루트의 images 폴더 상대경로
      return `images/${pickRandom(list)}`;
    }

    function showResult(msg, idx, gender){
      const res=$("res");
      const imgUrl=imageFor(idx, gender);
      const alt=`${DAY_NAMES[idx]} ${gender==='F'?'여자':'남자'} 아이 이미지`;
      if(!imgUrl){ res.innerHTML=`<div class="msg">${msg.sentence}</div>`; return; }
      res.innerHTML=`
        <div class="msg">${msg.sentence}</div>
        <div class="img-wrap">
          <img class="res-img" src="${imgUrl}" alt="${alt}" />
        </div>
        <div class="img-caption">해당 이미지는 ChatGPT 5로 제작되었습니다.</div>
      `;
      const img=res.querySelector('img.res-img');
      img.onerror=function(){ this.replaceWith(Object.assign(document.createElement('div'),{className:'err',textContent:'이미지를 불러오지 못했어요.'})); };
    }

    $("checkBtn").addEventListener("click",()=>{
      const btn=$("checkBtn");
      const res=$("res");
      const genderSel=$("gender");
      try{
        btn.disabled=true;btn.textContent='조회 중...';
        if(mEl.value.length===1) mEl.value = mEl.value.padStart(2,'0');
        if(dEl.value.length===1) dEl.value = dEl.value.padStart(2,'0');

        const dt=parseDateFromFields();
        const gender=genderSel?genderSel.value:'F';
        if(!dt){res.innerHTML=`<div class="msg err">유효한 날짜를 입력해 주세요.</div>`;return;}
        const y=dt.getFullYear();
        const m=String(dt.getMonth()+1).padStart(2,'0');
        const d=String(dt.getDate()).padStart(2,'0');
        yEl.value=String(y); mEl.value=m; dEl.value=d;

        const idx=dt.getDay();
        const msg=makeMessage(idx);
        showResult(msg,idx,gender);
        history.replaceState(null,"",`#${y}-${m}-${d}`);
      }catch(e){console.error(e);res.innerHTML=`<div class="msg err">오류가 발생했어요.</div>`;}finally{btn.disabled=false;btn.textContent='조회하기';}
    });

    $("resetBtn").addEventListener("click",()=>{
      [yEl,mEl,dEl].forEach(el=>el.value='');const g=$("gender");if(g)g.value='F';
      $("res").innerHTML=`<div class="msg">생년월일과 성별을 입력하고 <b>조회하기</b>를 눌러주세요.</div>`;
      history.replaceState(null,"",location.pathname);yEl.focus();
    });

    // 해시로 YYYY-MM-DD 들어오면 자동 채우기
    (function initFromHash(){
      const h=decodeURIComponent(location.hash.replace('#','')).trim();
      const m=h.match(/(\d{4})-(\d{2})-(\d{2})/);
      if(!m) return;
      yEl.value=m[1]; mEl.value=m[2]; dEl.value=m[3];
    })();
  </script>
</body>
</html>
